\hypertarget{adc_8h}{
\section{adc.h File Reference}
\label{adc_8h}\index{adc.h@{adc.h}}
}
Routines to use AT91 onboard ADC in polling mode. 

{\tt \#include \char`\"{}config.h\char`\"{}}\par
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef uint16\_\-t \hyperlink{adc_8h_33301a686dfa6470fcd5ddae981e889f}{adc\_\-sample\_\-t}
\end{CompactItemize}
\subsection*{Enumerations}
\begin{CompactItemize}
\item 
enum \hyperlink{adc_8h_afc4060027875f8fe46242b0656d7814}{adc\_\-channel\_\-t} \{ \par
\hyperlink{adc_8h_afc4060027875f8fe46242b0656d781469dddf5b6edfe54ac25b653d8f62d104}{ADC\_\-CHANNEL\_\-0}, 
\hyperlink{adc_8h_afc4060027875f8fe46242b0656d7814203b48944d019f4fda969a6fc2a9e492}{ADC\_\-CHANNEL\_\-1}, 
\hyperlink{adc_8h_afc4060027875f8fe46242b0656d7814b5ff3c915ec02ae6ac3980a1312a4815}{ADC\_\-CHANNEL\_\-2}, 
\hyperlink{adc_8h_afc4060027875f8fe46242b0656d78146ca054f67bee5197eec92a0379cffb6e}{ADC\_\-CHANNEL\_\-3}, 
\par
\hyperlink{adc_8h_afc4060027875f8fe46242b0656d7814358c6f5e7243a7ed09640253d83d2131}{ADC\_\-CHANNEL\_\-4}, 
\hyperlink{adc_8h_afc4060027875f8fe46242b0656d7814dd27743e52a0719102130818d31d545a}{ADC\_\-CHANNEL\_\-5}, 
\hyperlink{adc_8h_afc4060027875f8fe46242b0656d7814cf3be71bfeb9d342e6d845db91782b79}{ADC\_\-CHANNEL\_\-6}, 
\hyperlink{adc_8h_afc4060027875f8fe46242b0656d7814d6ef86ca1b448f220905d771f258586a}{ADC\_\-CHANNEL\_\-7}, 
\par
\hyperlink{adc_8h_afc4060027875f8fe46242b0656d78145bbd5b2423576a615d0297f820a53ffe}{ADC\_\-CHANNEL\_\-NUM}
 \}
\item 
enum \hyperlink{adc_8h_247cc11788d461a47c434d82e18005ec}{adc\_\-ref\_\-mode\_\-t} \{ \hyperlink{adc_8h_247cc11788d461a47c434d82e18005ec926d75053886d50bd8c09565120d60a5}{ADC\_\-REF\_\-EXT} =  0
 \}
\item 
enum \{ \hyperlink{adc_8h_06fc87d81c62e9abb8790b6e5713c55b9c0e78695c7361614eac5a1754b4549e}{ADC\_\-BITS} =  10
 \}
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void \hyperlink{adc_8h_69a43ff3ea08aa9fa4d7cadaaf49d582}{adc\_\-reference\_\-select} (\hyperlink{adc_8h_247cc11788d461a47c434d82e18005ec}{adc\_\-ref\_\-mode\_\-t} mode)
\item 
void \hyperlink{adc_8h_3b7ec98b5dd780410ffc765e9dae9191}{adc\_\-init} (uint8\_\-t channels)
\item 
bool \hyperlink{adc_8h_098350baf1f04c7cca191435de3a59c3}{adc\_\-conversion\_\-start} (\hyperlink{adc_8h_afc4060027875f8fe46242b0656d7814}{adc\_\-channel\_\-t} channel)
\item 
bool \hyperlink{adc_8h_cd1e897c597119a36f256130d290cae3}{adc\_\-ready\_\-p} (void)
\item 
int8\_\-t \hyperlink{adc_8h_dc90c481b652679d2be38adeaa86b150}{adc\_\-read} (\hyperlink{adc_8h_33301a686dfa6470fcd5ddae981e889f}{adc\_\-sample\_\-t} $\ast$value)
\item 
int8\_\-t \hyperlink{adc_8h_a86fd80d7980d3d71939fe30cfbd65f5}{adc\_\-read\_\-wait} (\hyperlink{adc_8h_afc4060027875f8fe46242b0656d7814}{adc\_\-channel\_\-t} channel, \hyperlink{adc_8h_33301a686dfa6470fcd5ddae981e889f}{adc\_\-sample\_\-t} $\ast$pvalue)
\item 
void \hyperlink{adc_8h_d20b4babc40e03c144a6195cb44820c0}{adc\_\-stop} (void)
\item 
void \hyperlink{adc_8h_3b4b977d0665b5346849f3b892ac5106}{adc\_\-disable} (void)
\end{CompactItemize}


\subsection{Detailed Description}
Routines to use AT91 onboard ADC in polling mode. 

\begin{Desc}
\item[Author:]M. P. Hayes, UCECE \end{Desc}
\begin{Desc}
\item[Date:]3 Feb 2005 \end{Desc}


\subsection{Typedef Documentation}
\hypertarget{adc_8h_33301a686dfa6470fcd5ddae981e889f}{
\index{adc.h@{adc.h}!adc\_\-sample\_\-t@{adc\_\-sample\_\-t}}
\index{adc\_\-sample\_\-t@{adc\_\-sample\_\-t}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef uint16\_\-t {\bf adc\_\-sample\_\-t}}}
\label{adc_8h_33301a686dfa6470fcd5ddae981e889f}


ADC sample size. 

\subsection{Enumeration Type Documentation}
\hypertarget{adc_8h_06fc87d81c62e9abb8790b6e5713c55b}{
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}anonymous enum}}
\label{adc_8h_06fc87d81c62e9abb8790b6e5713c55b}


ADC bits per conversion. \begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{ADC\_\-BITS@{ADC\_\-BITS}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-BITS@{ADC\_\-BITS}}\item[{\em 
\hypertarget{adc_8h_06fc87d81c62e9abb8790b6e5713c55b9c0e78695c7361614eac5a1754b4549e}{
ADC\_\-BITS}
\label{adc_8h_06fc87d81c62e9abb8790b6e5713c55b9c0e78695c7361614eac5a1754b4549e}
}]\end{description}
\end{Desc}

\hypertarget{adc_8h_afc4060027875f8fe46242b0656d7814}{
\index{adc.h@{adc.h}!adc\_\-channel\_\-t@{adc\_\-channel\_\-t}}
\index{adc\_\-channel\_\-t@{adc\_\-channel\_\-t}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}enum {\bf adc\_\-channel\_\-t}}}
\label{adc_8h_afc4060027875f8fe46242b0656d7814}


ADC channels. \begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{ADC\_\-CHANNEL\_\-0@{ADC\_\-CHANNEL\_\-0}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-CHANNEL\_\-0@{ADC\_\-CHANNEL\_\-0}}\item[{\em 
\hypertarget{adc_8h_afc4060027875f8fe46242b0656d781469dddf5b6edfe54ac25b653d8f62d104}{
ADC\_\-CHANNEL\_\-0}
\label{adc_8h_afc4060027875f8fe46242b0656d781469dddf5b6edfe54ac25b653d8f62d104}
}]\index{ADC\_\-CHANNEL\_\-1@{ADC\_\-CHANNEL\_\-1}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-CHANNEL\_\-1@{ADC\_\-CHANNEL\_\-1}}\item[{\em 
\hypertarget{adc_8h_afc4060027875f8fe46242b0656d7814203b48944d019f4fda969a6fc2a9e492}{
ADC\_\-CHANNEL\_\-1}
\label{adc_8h_afc4060027875f8fe46242b0656d7814203b48944d019f4fda969a6fc2a9e492}
}]\index{ADC\_\-CHANNEL\_\-2@{ADC\_\-CHANNEL\_\-2}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-CHANNEL\_\-2@{ADC\_\-CHANNEL\_\-2}}\item[{\em 
\hypertarget{adc_8h_afc4060027875f8fe46242b0656d7814b5ff3c915ec02ae6ac3980a1312a4815}{
ADC\_\-CHANNEL\_\-2}
\label{adc_8h_afc4060027875f8fe46242b0656d7814b5ff3c915ec02ae6ac3980a1312a4815}
}]\index{ADC\_\-CHANNEL\_\-3@{ADC\_\-CHANNEL\_\-3}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-CHANNEL\_\-3@{ADC\_\-CHANNEL\_\-3}}\item[{\em 
\hypertarget{adc_8h_afc4060027875f8fe46242b0656d78146ca054f67bee5197eec92a0379cffb6e}{
ADC\_\-CHANNEL\_\-3}
\label{adc_8h_afc4060027875f8fe46242b0656d78146ca054f67bee5197eec92a0379cffb6e}
}]\index{ADC\_\-CHANNEL\_\-4@{ADC\_\-CHANNEL\_\-4}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-CHANNEL\_\-4@{ADC\_\-CHANNEL\_\-4}}\item[{\em 
\hypertarget{adc_8h_afc4060027875f8fe46242b0656d7814358c6f5e7243a7ed09640253d83d2131}{
ADC\_\-CHANNEL\_\-4}
\label{adc_8h_afc4060027875f8fe46242b0656d7814358c6f5e7243a7ed09640253d83d2131}
}]\index{ADC\_\-CHANNEL\_\-5@{ADC\_\-CHANNEL\_\-5}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-CHANNEL\_\-5@{ADC\_\-CHANNEL\_\-5}}\item[{\em 
\hypertarget{adc_8h_afc4060027875f8fe46242b0656d7814dd27743e52a0719102130818d31d545a}{
ADC\_\-CHANNEL\_\-5}
\label{adc_8h_afc4060027875f8fe46242b0656d7814dd27743e52a0719102130818d31d545a}
}]\index{ADC\_\-CHANNEL\_\-6@{ADC\_\-CHANNEL\_\-6}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-CHANNEL\_\-6@{ADC\_\-CHANNEL\_\-6}}\item[{\em 
\hypertarget{adc_8h_afc4060027875f8fe46242b0656d7814cf3be71bfeb9d342e6d845db91782b79}{
ADC\_\-CHANNEL\_\-6}
\label{adc_8h_afc4060027875f8fe46242b0656d7814cf3be71bfeb9d342e6d845db91782b79}
}]\index{ADC\_\-CHANNEL\_\-7@{ADC\_\-CHANNEL\_\-7}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-CHANNEL\_\-7@{ADC\_\-CHANNEL\_\-7}}\item[{\em 
\hypertarget{adc_8h_afc4060027875f8fe46242b0656d7814d6ef86ca1b448f220905d771f258586a}{
ADC\_\-CHANNEL\_\-7}
\label{adc_8h_afc4060027875f8fe46242b0656d7814d6ef86ca1b448f220905d771f258586a}
}]\index{ADC\_\-CHANNEL\_\-NUM@{ADC\_\-CHANNEL\_\-NUM}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-CHANNEL\_\-NUM@{ADC\_\-CHANNEL\_\-NUM}}\item[{\em 
\hypertarget{adc_8h_afc4060027875f8fe46242b0656d78145bbd5b2423576a615d0297f820a53ffe}{
ADC\_\-CHANNEL\_\-NUM}
\label{adc_8h_afc4060027875f8fe46242b0656d78145bbd5b2423576a615d0297f820a53ffe}
}]\end{description}
\end{Desc}

\hypertarget{adc_8h_247cc11788d461a47c434d82e18005ec}{
\index{adc.h@{adc.h}!adc\_\-ref\_\-mode\_\-t@{adc\_\-ref\_\-mode\_\-t}}
\index{adc\_\-ref\_\-mode\_\-t@{adc\_\-ref\_\-mode\_\-t}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}enum {\bf adc\_\-ref\_\-mode\_\-t}}}
\label{adc_8h_247cc11788d461a47c434d82e18005ec}


ADC reference modes. \begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{ADC\_\-REF\_\-EXT@{ADC\_\-REF\_\-EXT}!adc.h@{adc.h}}\index{adc.h@{adc.h}!ADC\_\-REF\_\-EXT@{ADC\_\-REF\_\-EXT}}\item[{\em 
\hypertarget{adc_8h_247cc11788d461a47c434d82e18005ec926d75053886d50bd8c09565120d60a5}{
ADC\_\-REF\_\-EXT}
\label{adc_8h_247cc11788d461a47c434d82e18005ec926d75053886d50bd8c09565120d60a5}
}]\end{description}
\end{Desc}



\subsection{Function Documentation}
\hypertarget{adc_8h_098350baf1f04c7cca191435de3a59c3}{
\index{adc.h@{adc.h}!adc\_\-conversion\_\-start@{adc\_\-conversion\_\-start}}
\index{adc\_\-conversion\_\-start@{adc\_\-conversion\_\-start}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}bool adc\_\-conversion\_\-start ({\bf adc\_\-channel\_\-t} {\em channel})}}
\label{adc_8h_098350baf1f04c7cca191435de3a59c3}


Starts a conversion in the ADC on the specified channel. 

References ADC\_\-CHANNEL\_\-NUM, adc\_\-ready\_\-p(), adc\_\-start(), and AT91C\_\-BASE\_\-ADC.

Referenced by adc\_\-read\_\-wait().\hypertarget{adc_8h_3b4b977d0665b5346849f3b892ac5106}{
\index{adc.h@{adc.h}!adc\_\-disable@{adc\_\-disable}}
\index{adc\_\-disable@{adc\_\-disable}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void adc\_\-disable (void)}}
\label{adc_8h_3b4b977d0665b5346849f3b892ac5106}


Disables the ADC from doing anything. Requires reinitalisation.

Disables the ADC from doing anything. \hypertarget{adc_8h_3b7ec98b5dd780410ffc765e9dae9191}{
\index{adc.h@{adc.h}!adc\_\-init@{adc\_\-init}}
\index{adc\_\-init@{adc\_\-init}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void adc\_\-init (uint8\_\-t channels {\em \_\-\_\-UNUSED\_\-\_\-})}}
\label{adc_8h_3b7ec98b5dd780410ffc765e9dae9191}


Initalises the ADC registers for polling operation. 

References adc\_\-read\_\-wait(), adc\_\-reset(), and adc\_\-resolution\_\-set().\hypertarget{adc_8h_dc90c481b652679d2be38adeaa86b150}{
\index{adc.h@{adc.h}!adc\_\-read@{adc\_\-read}}
\index{adc\_\-read@{adc\_\-read}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int8\_\-t adc\_\-read ({\bf adc\_\-sample\_\-t} $\ast$ {\em pvalue})}}
\label{adc_8h_dc90c481b652679d2be38adeaa86b150}


Returns 1 if valid sample read. 

References adc\_\-ready\_\-p(), and AT91C\_\-BASE\_\-ADC.

Referenced by adc\_\-read\_\-wait().\hypertarget{adc_8h_a86fd80d7980d3d71939fe30cfbd65f5}{
\index{adc.h@{adc.h}!adc\_\-read\_\-wait@{adc\_\-read\_\-wait}}
\index{adc\_\-read\_\-wait@{adc\_\-read\_\-wait}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int8\_\-t adc\_\-read\_\-wait ({\bf adc\_\-channel\_\-t} {\em channel}, \/  {\bf adc\_\-sample\_\-t} $\ast$ {\em pvalue})}}
\label{adc_8h_a86fd80d7980d3d71939fe30cfbd65f5}


Start conversion on selected channel, wait until conversion finished. 

References adc\_\-conversion\_\-start(), adc\_\-read(), and adc\_\-ready\_\-p().

Referenced by adc\_\-init().\hypertarget{adc_8h_cd1e897c597119a36f256130d290cae3}{
\index{adc.h@{adc.h}!adc\_\-ready\_\-p@{adc\_\-ready\_\-p}}
\index{adc\_\-ready\_\-p@{adc\_\-ready\_\-p}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}bool adc\_\-ready\_\-p (void)}}
\label{adc_8h_cd1e897c597119a36f256130d290cae3}


Returns true if a conversion is not in progress.

Returns true if a conversion has finished. 

References AT91C\_\-ADC\_\-DRDY, and AT91C\_\-BASE\_\-ADC.

Referenced by adc\_\-conversion\_\-start(), adc\_\-read(), and adc\_\-read\_\-wait().\hypertarget{adc_8h_69a43ff3ea08aa9fa4d7cadaaf49d582}{
\index{adc.h@{adc.h}!adc\_\-reference\_\-select@{adc\_\-reference\_\-select}}
\index{adc\_\-reference\_\-select@{adc\_\-reference\_\-select}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void adc\_\-reference\_\-select ({\bf adc\_\-ref\_\-mode\_\-t} mode {\em \_\-\_\-UNUSED\_\-\_\-})}}
\label{adc_8h_69a43ff3ea08aa9fa4d7cadaaf49d582}


Select ADC reference mode. \hypertarget{adc_8h_d20b4babc40e03c144a6195cb44820c0}{
\index{adc.h@{adc.h}!adc\_\-stop@{adc\_\-stop}}
\index{adc\_\-stop@{adc\_\-stop}!adc.h@{adc.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void adc\_\-stop (void)}}
\label{adc_8h_d20b4babc40e03c144a6195cb44820c0}


Halts any currently running conversion. 