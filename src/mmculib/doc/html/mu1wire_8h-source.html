<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>mmculib: mu1wire.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>mu1wire.h</h1><a href="mu1wire_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00006"></a>00006 <span class="preprocessor">#ifndef MU1WIRE_H</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="preprocessor">#define MU1WIRE_H</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "config.h"</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="keyword">enum</span>
<a name="l00012"></a>00012 {
<a name="l00013"></a><a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d310bd7c557cc5f18b84ffea10795eb16e65">00013</a>     <a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d310bd7c557cc5f18b84ffea10795eb16e65">MU1WIRE_ERR_BUS_LOW</a> = 1,     <span class="comment">/* Can't drive bus high.  */</span>
<a name="l00014"></a><a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d31082a91a1e7f99ef22f89816c28ef1d6e4">00014</a>     <a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d31082a91a1e7f99ef22f89816c28ef1d6e4">MU1WIRE_ERR_BUS_STUCK</a> = 2,   <span class="comment">/* Bus stuck low.  */</span>
<a name="l00015"></a><a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d310fefc4f96a75cce8e696bc19e05084a1b">00015</a>     <a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d310fefc4f96a75cce8e696bc19e05084a1b">MU1WIRE_ERR_PRESENCE_SHORT</a> = 3,      <span class="comment">/* Slave presence pulse too short.  */</span>
<a name="l00016"></a><a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d310dd9b599870d0e12bd9a8d0a1260db7c2">00016</a>     <a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d310dd9b599870d0e12bd9a8d0a1260db7c2">MU1WIRE_ERR_PRESENCE_LONG</a> = 4,        <span class="comment">/* Slave presence pulse too long.  */</span>
<a name="l00017"></a><a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d3106145d34cbab07fbac3d36decaf8f7205">00017</a>     <a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d3106145d34cbab07fbac3d36decaf8f7205">MU1WIRE_ERR_MULTIPLE_DEVICES</a> = 5,
<a name="l00018"></a><a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d3109119c3aca613b8dd0115e28d0269fd01">00018</a>     <a class="code" href="mu1wire_8h.html#94798fdadfbf49a7c658ace669a1d3109119c3aca613b8dd0115e28d0269fd01">MU1WIRE_ERR_BUS_HIGH</a> = 6     <span class="comment">/* Can't drive bus low.  */</span>
<a name="l00019"></a>00019 };
<a name="l00020"></a>00020 
<a name="l00021"></a><a class="code" href="unionmu1wire__rom__code__t.html">00021</a> <span class="keyword">typedef</span> <span class="keyword">union</span>
<a name="l00022"></a>00022 {
<a name="l00023"></a>00023     <span class="keyword">struct</span>
<a name="l00024"></a>00024     {
<a name="l00025"></a><a class="code" href="unionmu1wire__rom__code__t.html#338c5242d61b9f419eb94933021fc237">00025</a>         uint8_t family;
<a name="l00026"></a><a class="code" href="unionmu1wire__rom__code__t.html#6cdd799809f2da43fba40d929bea6d17">00026</a>         uint8_t serial[6];
<a name="l00027"></a><a class="code" href="unionmu1wire__rom__code__t.html#0280c907515345f652f53106d00d789a">00027</a>         uint8_t crc;
<a name="l00028"></a>00028     } fields;
<a name="l00029"></a><a class="code" href="unionmu1wire__rom__code__t.html#39305b4006b16b1a6acef9b3193820f3">00029</a>     uint8_t bytes[8];
<a name="l00030"></a>00030 }
<a name="l00031"></a>00031 <a class="code" href="unionmu1wire__rom__code__t.html">mu1wire_rom_code_t</a>;
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 
<a name="l00034"></a><a class="code" href="structmu1wire__obj__t.html">00034</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00035"></a>00035 {
<a name="l00036"></a><a class="code" href="structmu1wire__obj__t.html#b39acf30542b9a7c0d5bf50e71a2d0cc">00036</a>     <a class="code" href="unionmu1wire__rom__code__t.html">mu1wire_rom_code_t</a> rom_code;
<a name="l00037"></a>00037 } <a class="code" href="structmu1wire__obj__t.html">mu1wire_obj_t</a>;
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="mu1wire_8h.html#5c31299a6052ec34862c32998a528dcf">00039</a> <span class="keyword">typedef</span> <a class="code" href="structmu1wire__obj__t.html">mu1wire_obj_t</a> * <a class="code" href="structmu1wire__obj__t.html">mu1wire_t</a>;
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="comment">/* This interface only supports the one bus but with multiple devices</span>
<a name="l00043"></a>00043 <span class="comment">  on the bus.  This was a deliberate choice that I may regret one day.</span>
<a name="l00044"></a>00044 <span class="comment">  It keeps the interface simpler, reduces the code size, and most</span>
<a name="l00045"></a>00045 <span class="comment">  systems will only ever have a single one wire bus.  To support multiple</span>
<a name="l00046"></a>00046 <span class="comment">  one wire buses then run-time configuration will need to be passed</span>
<a name="l00047"></a>00047 <span class="comment">  as an additional argument to mu1wire_init.  */</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="comment">/* Return true if one wire bus operation has completed.   */</span>
<a name="l00051"></a>00051 <span class="keyword">extern</span> <span class="keywordtype">bool</span>
<a name="l00052"></a>00052 <a class="code" href="mu1wire_8h.html#68a790fc3b125b7d77685c212a650513">mu1wire_ready_p</a> (<span class="keywordtype">void</span>);
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="keyword">extern</span> int8_t
<a name="l00055"></a>00055 <a class="code" href="mu1wire_8h.html#ae3a5c9ce1ecf76a46d4df84621fb3df">mu1wire_reset</a> (<span class="keywordtype">void</span>);
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="keyword">extern</span> <span class="keywordtype">void</span>
<a name="l00058"></a>00058 <a class="code" href="mu1wire_8h.html#be8cb77a11e9d16062241109602ec37c">mu1wire_bit_write</a> (uint8_t value);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="keyword">extern</span> <span class="keywordtype">void</span>
<a name="l00061"></a>00061 <a class="code" href="mu1wire_8h.html#a49128e7f51aec073436661dd037dcc1">mu1wire_byte_write</a> (uint8_t value);
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="keyword">extern</span> uint8_t
<a name="l00064"></a>00064 <a class="code" href="mu1wire_8h.html#650d5606d387ef99d666adab7e1812af">mu1wire_bit_read</a> (<span class="keywordtype">void</span>);
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="keyword">extern</span> uint8_t
<a name="l00067"></a>00067 <a class="code" href="mu1wire_8h.html#98ce62f27d7385ad885e6ab3851907c5">mu1wire_byte_read</a> (<span class="keywordtype">void</span>);
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="comment">/* Send COMMAND to specified DEV.  */</span>
<a name="l00070"></a>00070 <span class="keyword">extern</span> int8_t
<a name="l00071"></a>00071 <a class="code" href="mu1wire_8h.html#c680b1201e1368eba2b9c4f4b01597ed">mu1wire_command</a> (<a class="code" href="structmu1wire__obj__t.html">mu1wire_t</a> dev, uint8_t command);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="keyword">extern</span> int8_t
<a name="l00074"></a>00074 <a class="code" href="mu1wire_8h.html#a417e91b65043d8d3563638e82cd9093">mu1wire_broadcast</a> (uint8_t command);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="comment">/* Read SIZE bytes of DATA.  */</span>
<a name="l00077"></a>00077 <span class="keyword">extern</span> int8_t
<a name="l00078"></a>00078 <a class="code" href="mu1wire_8h.html#ebd3c88254db9d70330030d350e85ac1">mu1wire_read</a> (<a class="code" href="structmu1wire__obj__t.html">mu1wire_t</a> dev, <span class="keywordtype">void</span> *data, uint8_t size);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">/* Write SIZE bytes of DATA.  */</span>
<a name="l00081"></a>00081 <span class="keyword">extern</span> int8_t
<a name="l00082"></a>00082 <a class="code" href="mu1wire_8h.html#b9a76bb0ebbf4651d2e8b3372fce8497">mu1wire_write</a> (<a class="code" href="structmu1wire__obj__t.html">mu1wire_t</a> dev, <span class="keywordtype">void</span> *data, uint8_t size);
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">/* Initialise one wire bus and discover all the one wire devices on</span>
<a name="l00085"></a>00085 <span class="comment">   the bus up to a maximum of DEVICES_MAX devices.  This returns the</span>
<a name="l00086"></a>00086 <span class="comment">   number of found devices.  */</span>
<a name="l00087"></a>00087 <span class="keyword">extern</span> int8_t
<a name="l00088"></a>00088 <a class="code" href="mu1wire_8h.html#786b17061e52ab003db0c94dc0d0d37d">mu1wire_init</a> (<a class="code" href="structmu1wire__obj__t.html">mu1wire_obj_t</a> *devices, uint8_t devices_max);
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">/* In mu1wire_debug.c  */</span>
<a name="l00091"></a>00091 <span class="keyword">extern</span> <span class="keywordtype">void</span>
<a name="l00092"></a>00092 <a class="code" href="mu1wire_8h.html#7277445f2b81d2425cc156e6bb8a64ce">mu1wire_debug</a> (<a class="code" href="structmu1wire__obj__t.html">mu1wire_t</a> dev);
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue May 27 11:44:04 2008 for mmculib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
