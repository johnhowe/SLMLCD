\hypertarget{lmatrix_8h}{
\section{lmatrix.h File Reference}
\label{lmatrix_8h}\index{lmatrix.h@{lmatrix.h}}
}
Drive a multiplexed LED matrix. 

{\tt \#include \char`\"{}config.h\char`\"{}}\par
{\tt \#include \char`\"{}port.h\char`\"{}}\par
\subsection*{Data Structures}
\begin{CompactItemize}
\item 
struct \hyperlink{structlmatrix__port__t}{lmatrix\_\-port\_\-t}
\item 
struct \hyperlink{structlmatrix__private__t}{lmatrix\_\-private\_\-t}
\end{CompactItemize}
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef uint8\_\-t \hyperlink{lmatrix_8h_af6a0fe2df788e17c8084c26579b4e7a}{lmatrix\_\-row\_\-state\_\-t}
\item 
typedef \hyperlink{structlmatrix__private__t}{lmatrix\_\-private\_\-t} \hyperlink{lmatrix_8h_7208b8cbf01a2e82479ce04dccf7c133}{lmatrix\_\-obj\_\-t}
\item 
typedef \hyperlink{structlmatrix__private__t}{lmatrix\_\-obj\_\-t} $\ast$ \hyperlink{lmatrix_8h_eb5032aa98a53a7f9bec121d85361cc4}{lmatrix\_\-t}
\end{CompactItemize}
\subsection*{Enumerations}
\begin{CompactItemize}
\item 
enum \{ \hyperlink{lmatrix_8h_80155586fa275b28773c9b203f52cabadb95d659a97832fc3a96af9543ec93e7}{LMATRIX\_\-PIXELS} =  LMATRIX\_\-ROWS $\ast$ LMATRIX\_\-COLS
 \}
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void \hyperlink{lmatrix_8h_cf0e6eaa246a6cb1c1f0718d0f5e4691}{lmatrix\_\-set} (\hyperlink{structlmatrix__private__t}{lmatrix\_\-t} lmatrix, uint8\_\-t row, uint8\_\-t col, bool val)
\item 
void \hyperlink{lmatrix_8h_0d5018d158959439a11aa8c95aaa7bbd}{lmatrix\_\-write} (\hyperlink{structlmatrix__private__t}{lmatrix\_\-t} lmatrix, uint8\_\-t $\ast$screen, uint8\_\-t $\ast$map)
\item 
void \hyperlink{lmatrix_8h_c7eab97244e782fa4811e8f9a12b36eb}{lmatrix\_\-update} (\hyperlink{structlmatrix__private__t}{lmatrix\_\-t} lmatrix)
\item 
\hyperlink{structlmatrix__private__t}{lmatrix\_\-t} \hyperlink{lmatrix_8h_e4f69c0631c631bb4c440d80e72157b3}{lmatrix\_\-init} (\hyperlink{structlmatrix__private__t}{lmatrix\_\-obj\_\-t} $\ast$info)
\end{CompactItemize}


\subsection{Detailed Description}
Drive a multiplexed LED matrix. 

\begin{Desc}
\item[Author:]M. P. Hayes, UCECE \end{Desc}
\begin{Desc}
\item[Date:]28 March 2007 \end{Desc}
\begin{Desc}
\item[Note:]This only supports a single instance. \end{Desc}


\subsection{Typedef Documentation}
\hypertarget{lmatrix_8h_7208b8cbf01a2e82479ce04dccf7c133}{
\index{lmatrix.h@{lmatrix.h}!lmatrix\_\-obj\_\-t@{lmatrix\_\-obj\_\-t}}
\index{lmatrix\_\-obj\_\-t@{lmatrix\_\-obj\_\-t}!lmatrix.h@{lmatrix.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf lmatrix\_\-private\_\-t} {\bf lmatrix\_\-obj\_\-t}}}
\label{lmatrix_8h_7208b8cbf01a2e82479ce04dccf7c133}


\hypertarget{lmatrix_8h_af6a0fe2df788e17c8084c26579b4e7a}{
\index{lmatrix.h@{lmatrix.h}!lmatrix\_\-row\_\-state\_\-t@{lmatrix\_\-row\_\-state\_\-t}}
\index{lmatrix\_\-row\_\-state\_\-t@{lmatrix\_\-row\_\-state\_\-t}!lmatrix.h@{lmatrix.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef uint8\_\-t {\bf lmatrix\_\-row\_\-state\_\-t}}}
\label{lmatrix_8h_af6a0fe2df788e17c8084c26579b4e7a}


\hypertarget{lmatrix_8h_eb5032aa98a53a7f9bec121d85361cc4}{
\index{lmatrix.h@{lmatrix.h}!lmatrix\_\-t@{lmatrix\_\-t}}
\index{lmatrix\_\-t@{lmatrix\_\-t}!lmatrix.h@{lmatrix.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf lmatrix\_\-obj\_\-t}$\ast$ {\bf lmatrix\_\-t}}}
\label{lmatrix_8h_eb5032aa98a53a7f9bec121d85361cc4}




\subsection{Enumeration Type Documentation}
\hypertarget{lmatrix_8h_80155586fa275b28773c9b203f52caba}{
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}anonymous enum}}
\label{lmatrix_8h_80155586fa275b28773c9b203f52caba}


\begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{LMATRIX\_\-PIXELS@{LMATRIX\_\-PIXELS}!lmatrix.h@{lmatrix.h}}\index{lmatrix.h@{lmatrix.h}!LMATRIX\_\-PIXELS@{LMATRIX\_\-PIXELS}}\item[{\em 
\hypertarget{lmatrix_8h_80155586fa275b28773c9b203f52cabadb95d659a97832fc3a96af9543ec93e7}{
LMATRIX\_\-PIXELS}
\label{lmatrix_8h_80155586fa275b28773c9b203f52cabadb95d659a97832fc3a96af9543ec93e7}
}]\end{description}
\end{Desc}



\subsection{Function Documentation}
\hypertarget{lmatrix_8h_e4f69c0631c631bb4c440d80e72157b3}{
\index{lmatrix.h@{lmatrix.h}!lmatrix\_\-init@{lmatrix\_\-init}}
\index{lmatrix\_\-init@{lmatrix\_\-init}!lmatrix.h@{lmatrix.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf lmatrix\_\-t} lmatrix\_\-init ({\bf lmatrix\_\-obj\_\-t} $\ast$ {\em info})}}
\label{lmatrix_8h_e4f69c0631c631bb4c440d80e72157b3}


INFO is a pointer into RAM that stores the state of the LMATRIX. The returned handle is passed to the other lmatrix\_\-xxx routines to denote the LMATRIX to operate on. Currently only one lmatrix instance is supported with parameters specified by target.h. 

References lmatrix\_\-private\_\-t::col, lmatrix\_\-private\_\-t::col\_\-port, and lmatrix\_\-private\_\-t::state.\hypertarget{lmatrix_8h_cf0e6eaa246a6cb1c1f0718d0f5e4691}{
\index{lmatrix.h@{lmatrix.h}!lmatrix\_\-set@{lmatrix\_\-set}}
\index{lmatrix\_\-set@{lmatrix\_\-set}!lmatrix.h@{lmatrix.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lmatrix\_\-set ({\bf lmatrix\_\-t} {\em lmatrix}, \/  uint8\_\-t {\em row}, \/  uint8\_\-t {\em col}, \/  bool {\em val})}}
\label{lmatrix_8h_cf0e6eaa246a6cb1c1f0718d0f5e4691}


Set a pixel in the LED matrix to state VAL at ROW and COL. 

References ROWBIT, and lmatrix\_\-private\_\-t::state.\hypertarget{lmatrix_8h_c7eab97244e782fa4811e8f9a12b36eb}{
\index{lmatrix.h@{lmatrix.h}!lmatrix\_\-update@{lmatrix\_\-update}}
\index{lmatrix\_\-update@{lmatrix\_\-update}!lmatrix.h@{lmatrix.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lmatrix\_\-update ({\bf lmatrix\_\-t} {\em lmatrix})}}
\label{lmatrix_8h_c7eab97244e782fa4811e8f9a12b36eb}


Scan the LED matrix. This needs to be called at a rate of at least 20 Hz $\ast$ LMATRIX\_\-COLS to avoid noticeable flicker. 

References lmatrix\_\-port\_\-t::bitmask, lmatrix\_\-private\_\-t::col, lmatrix\_\-private\_\-t::col\_\-port, lmatrix\_\-port\_\-t::port, and lmatrix\_\-private\_\-t::state.\hypertarget{lmatrix_8h_0d5018d158959439a11aa8c95aaa7bbd}{
\index{lmatrix.h@{lmatrix.h}!lmatrix\_\-write@{lmatrix\_\-write}}
\index{lmatrix\_\-write@{lmatrix\_\-write}!lmatrix.h@{lmatrix.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lmatrix\_\-write ({\bf lmatrix\_\-t} {\em lmatrix}, \/  uint8\_\-t $\ast$ {\em screen}, \/  uint8\_\-t $\ast$ {\em map})}}
\label{lmatrix_8h_0d5018d158959439a11aa8c95aaa7bbd}




References ROWBIT, and lmatrix\_\-private\_\-t::state.